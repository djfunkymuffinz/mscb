<link rel="import" href="mscb-home.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="mscb-app">
<style>
   html {
      height: 100%;
   }

   html * {
      font-family 'Roboto';
   }

   body {
      height: 100%;
      margin: auto;
   }

   .has-background {
      background-image: url('../assets/img/background.jpg');
   }

   .tabs-container {
      position: relative;
      transition: height .4s cubic-bezier(.4,0,.2,1);
      height: 48px;
      font-family: 'Roboto';
      background-color: var(--primary-color);
      color: white;
   }

   paper-tabs {
      transition: opacity .4s cubic-bezier(.4,0,.2,1);
      width: 100%;
      position: absolute;
      bottom: 0px;
      background-color: transparent;
      color: currentColor;
   }

   .tabs-container.login-prompt {
      height: 96px;
   }

   .tabs-container.login-prompt paper-tabs {
      opacity: 0;
      pointer-events: none;
   }

   .bottom {
      width: 100%;
   }

   mscb-home {
      display: flex;
      flex-direction: column;
      align-items: center;
   }

   .members {
      height: 300px;
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      align-items: center;
   }

   .member-button {
      color: black;
      background-color: khaki;
   }

</style>

<template>
   <paper-header-panel mode="scroll">
      <paper-toolbar on-tap="captureLoginTap">
         <span class="title">MSCB</span>
      </paper-toolbar>
      <div 
         class$="tabs-container [[loginClass]]"
         on-tap="captureLoginTap">
         <paper-tabs selected="{{page}}">
            <paper-tab>Home</paper-tab>
            <paper-tab>Performances</paper-tab>
            <paper-tab>Join</paper-tab>
            <paper-tab>Donate</paper-tab>
            <paper-tab>Photos</paper-tab>
            <paper-tab on-tap="checkLogIn">Listening</paper-tab>
            <paper-tab on-tap="checkLogIn">Database</paper-tab>
            <paper-tab on-tap="checkLogIn">Documents</paper-tab>
         </paper-tabs>
      </div>
      
      <iron-pages selected="{{page}}">
         <mscb-home class="has-background"></mscb-home>
         <div></div>
         <div></div>
         <div></div>
         <div></div>
         <div></div>
         <div></div>
      </iron-pages>
   </paper-header-panel>
</template>

<script>
Polymer({

   is: 'mscb-app',

   properties: {
      isLoggedIn: {
         type: Boolean,
         value: false
      },
      loginClass: {
         type: String,
         value: 'My Bones',
      },
      page: {
         type: Number,
         value: 0
      },
   },

   logInAttempt: function() {
      console.log(this.isLoggedIn);
      this.isLoggedIn = true;
      console.log(this.isLoggedIn);
   },

   checkLogIn: function(event) {
      if(this.isLoggedIn) return;
      event.stopPropagation();
      this.loginClass = 'login-prompt';
      this.listen(this, 'tap', 'hideLogin');
      console.log(event);
   },

   captureLoginTap: function(event) {
      event.stopPropagation();
   },

   hideLogin: function(event) {
      this.loginClass = 'My Bones';
      this.unlisten(this, 'tap', 'hideLogin');
   }
});
</script>
</dom-module>
